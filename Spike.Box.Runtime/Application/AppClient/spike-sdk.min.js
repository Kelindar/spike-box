function ByteArray(n){this.data=n;this.position=0;this.bigEndian=!0;this.allowExceptions=!0}function LZF(){this.HLOG=14;this.HSIZE=16384;this.MAX_LIT=32;this.MAX_OFF=8192;this.MAX_REF=264;this.HashTable=new Array(this.HSIZE);this.compress=function(n,t){var o,h;this.HashTable.splice(0,this.HSIZE);for(var f=new ByteArray([]),l,i=0,e=0,s,u=n.getAt(i)<<8|n.getAt(i+1),c,r=0;;){if(i<t-2){if(u=u<<8|n.getAt(i+2),l=(u^u<<5)>>24-this.HLOG-u*5&this.HSIZE-1,s=this.HashTable[l],this.HashTable[l]=i,(c=i-s-1)<this.MAX_OFF&&i+4<t&&s>0&&n.getAt(s+0)==n.getAt(i+0)&&n.getAt(s+1)==n.getAt(i+1)&&n.getAt(s+2)==n.getAt(i+2)){o=2;h=t-i-o;h=h>this.MAX_REF?this.MAX_REF:h;do o++;while(o<h&&n.getAt(s+o)==n.getAt(i+o));if(r!=0){e++;f.writeByte(r-1);r=-r;do e++,f.writeByte(n.getAt(i+r));while(++r!=0)}o-=2;i++;o<7?(e++,f.writeByte((c>>8)+(o<<5))):(e++,e++,f.writeByte((c>>8)+224),f.writeByte(o-7));e++;f.writeByte(c);i+=o-1;u=n.getAt(i)<<8|n.getAt(i+1);u=u<<8|n.getAt(i+2);this.HashTable[(u^u<<5)>>24-this.HLOG-u*5&this.HSIZE-1]=i;i++;u=u<<8|n.getAt(i+2);this.HashTable[(u^u<<5)>>24-this.HLOG-u*5&this.HSIZE-1]=i;i++;continue}}else if(i==t)break;if(r++,i++,r==this.MAX_LIT){e++;f.writeByte(this.MAX_LIT-1);r=-r;do e++,f.writeByte(n.getAt(i+r));while(++r!=0)}}if(r!=0){e++;f.writeByte(r-1);r=-r;do e++,f.writeByte(n.getAt(i+r));while(++r!=0)}return f.length=e,f};this.decompress=function(n,t){var r=0,f=0,i=new ByteArray([]),e,o,u;do if(e=n.getAt(r),r++,e<32){e++;do i.writeByte(n.getAt(r)),r++,f++;while(--e!=0)}else{if(o=e>>5,u=f-((e&31)<<8)-1,o==7&&(o+=n.getAt(r),r++),u-=n.getAt(r),r++,u<0)return i.length=0,i;i.writeByte(i.getAt(u));u++;f++;i.writeByte(i.getAt(u));u++;f++;do i.writeByte(i.getAt(u)),u++,f++;while(--o!=0)}while(r<t);return i.length=f,i}}function PacketReader(n){this.buffer=n;this.decompress=function(){this.buffer=(new LZF).decompress(this.buffer,this.buffer.getSize());this.buffer.position=0};this.readBoolean=function(){return this.buffer.readInt(8,!1)==1};this.readByte=function(){return this.buffer.readInt(8,!1)};this.readSByte=function(){return this.buffer.readInt(8,!0)};this.readInt16=function(){return this.buffer.readInt(16,!0)};this.readInt32=function(){return this.buffer.readInt(32,!0)};this.readInt64=function(){return this.buffer.readInt(64,!0)};this.readUInt16=function(){return this.buffer.readInt(16,!1)};this.readUInt32=function(){return this.buffer.readInt(32,!1)};this.readUInt64=function(){return this.buffer.readInt(64,!1)};this.readDateTime=function(){var n=this.readInt16(),t=this.readInt16()-1,i=this.readInt16(),r=this.readInt16(),u=this.readInt16(),f=this.readInt16(),e=this.readInt16();return new Date(n,t,i,r,u,f,e)};this.readSingle=function(){return this.buffer.readFloat(23,8)};this.readDouble=function(){return this.buffer.readFloat(52,11)};this.readString=function(){var n=this.readInt32();return n>0?decodeURIComponent(escape(this.buffer.readBytes(n))):""};this.readDynamic=function(){if(this.readByte()==1){var n=this.readString();switch(n){case"Byte":return this.readByte();case"Int16":return this.readInt16();case"Int32":return this.readInt32();case"Int64":return this.readInt64();case"UInt16":return this.readUInt16();case"UInt32":return this.readUInt32();case"UInt64":return this.readUInt64();case"Boolean":return this.readBoolean();case"Single":return this.readSingle();case"Double":return this.readDouble();case"DateTime":return this.readDateTime();case"String":return this.readString();default:return null}}return null};this.readPacket=function(n){return n.read(this),n};this.readEntity=function(n){return n.read(this),n};this.readByteArray=function(){var n=this.readInt32();return new ByteArray(this.buffer.readBytes(n))};this.readArrayOfEntity=function(n){var r=this.readInt32(),f="new "+n+"()",t=[],i,u;if(r==0)return t;for(i=0;i<r;++i)u=eval(f),t.push(this.readEntity(u));return t};this.readArrayOfUInt16=function(){for(var i=this.readInt32(),t=[],n=0;n<i;++n)t.push(this.readUInt16());return t};this.readArrayOfInt16=function(){for(var i=this.readInt32(),t=[],n=0;n<i;++n)t.push(this.readInt16());return t};this.readArrayOfUInt32=function(){for(var i=this.readInt32(),t=[],n=0;n<i;++n)t.push(this.readUInt32());return t};this.readArrayOfInt32=function(){for(var i=this.readInt32(),t=[],n=0;n<i;++n)t.push(this.readInt32());return t};this.readArrayOfUInt64=function(){for(var i=this.readInt32(),t=[],n=0;n<i;++n)t.push(this.readUInt64());return t};this.readArrayOfInt64=function(){for(var i=this.readInt32(),t=[],n=0;n<i;++n)t.push(this.readInt64());return t};this.readArrayOfSingle=function(){for(var i=this.readInt32(),t=[],n=0;n<i;++n)t.push(this.readSingle());return t};this.readArrayOfDouble=function(){for(var i=this.readInt32(),t=[],n=0;n<i;++n)t.push(this.readDouble());return t};this.readArrayOfBoolean=function(){for(var i=this.readInt32(),t=[],n=0;n<i;++n)t.push(this.readBoolean());return t};this.readArrayOfDateTime=function(){for(var i=this.readInt32(),t=[],n=0;n<i;++n)t.push(this.readDateTime());return t};this.readArrayOfString=function(){for(var i=this.readInt32(),t=[],n=0;n<i;++n)t.push(this.readString());return t};this.readArrayOfDynamic=function(){for(var i=this.readInt32(),t=[],n=0;n<i;++n)t.push(this.readDynamic());return t}}function PacketWriter(){this.buffer=new ByteArray([]);this.compress=function(){this.buffer=(new LZF).compress(this.buffer,this.buffer.getSize())};this.writeBoolean=function(n){n?this.buffer.writeInt(1,8,!1):this.buffer.writeInt(0,8,!1)};this.writeKey=function(n){for(var i,r,t=0;t<8;t+=2)i=n.charAt(t)+n.charAt(t+1),r=parseInt(i,16),this.buffer.writeInt(r,8,!1)};this.writeByte=function(n){this.buffer.writeInt(n,8,!1)};this.writeSByte=function(n){this.buffer.writeInt(n,8,!0)};this.writeInt16=function(n){this.buffer.writeInt(n,16,!0)};this.writeInt32=function(n){this.buffer.writeInt(n,32,!0)};this.writeInt64=function(n){this.buffer.writeInt(n,64,!0)};this.writeUInt16=function(n){this.buffer.writeInt(n,16,!1)};this.writeUInt32=function(n){this.buffer.writeInt(n,32,!1)};this.writeUInt64=function(n){this.buffer.writeInt(n,64,!1)};this.writeDateTime=function(n){this.writeInt16(n.getFullYear());this.writeInt16(n.getMonth()+1);this.writeInt16(n.getDate());this.writeInt16(n.getHours());this.writeInt16(n.getMinutes());this.writeInt16(n.getSeconds());this.writeInt16(n.getMilliseconds())};this.writeSingle=function(n){this.buffer.writeFloat(n,23,8)};this.writeDouble=function(n){this.buffer.writeFloat(n,52,11)};this.writeString=function(n){n=="undefined"||n==null||n.length==0?this.writeInt32(0):(n=unescape(encodeURIComponent(n)),this.writeInt32(n.length),this.buffer.writeBytes(n))};this.writePacket=function(n){n.write(this)};this.writeEntity=function(n){n.write(this)};this.writeDynamic=function(n){var t=typeof n;t=="number"?(this.writeByte(1),this.writeString("Double"),this.writeDouble(n)):t=="boolean"?(this.writeByte(1),this.writeString("Boolean"),this.writeBoolean(n)):t=="string"?(this.writeByte(1),this.writeString("String"),this.writeString(n)):t=="object"&&n instanceof Date?(this.writeByte(1),this.writeString("DateTime"),this.writeDateTime(n)):this.writeByte(0)};this.writeByteArray=function(n){var t=typeof n;t=="object"&&n instanceof ByteArray?(this.writeInt32(n.getSize()),this.buffer.writeBytes(n.data)):(this.writeInt32(n.length),this.buffer.writeBytes(n))};this.writeArrayOfUInt16=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)this.writeUInt16(n[t])}else this.writeInt32(0)};this.writeArrayOfInt16=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)this.writeInt16(n[t])}else this.writeInt32(0)};this.writeArrayOfInt32=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)this.writeInt32(n[t])}else this.writeInt32(0)};this.writeArrayOfUInt32=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)this.writeUInt32(n[t])}else this.writeInt32(0)};this.writeArrayOfInt64=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)this.writeInt64(n[t])}else this.writeInt32(0)};this.writeArrayOfUInt64=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)this.writeUInt64(n[t])}else this.writeInt32(0)};this.writeArrayOfDouble=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)this.writeDouble(n[t])}else this.writeInt32(0)};this.writeArrayOfSingle=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)this.writeSingle(n[t])}else this.writeInt32(0)};this.writeArrayOfDateTime=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)this.writeDateTime(n[t])}else this.writeInt32(0)};this.writeArrayOfString=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)this.writeString(n[t])}else this.writeInt32(0)};this.writeArrayOfBoolean=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)this.writeBoolean(n[t])}else this.writeInt32(0)};this.writeArrayOfDynamic=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)this.writeDynamic(n[t])}else this.writeInt32(0)};this.writeArray=function(n){var i=typeof n,t;if(i=="object"&&n instanceof Array){if(this.writeInt32(n.length),n.length==0)return;for(t=0;t<n.length;++t)if(n[t].write!="undefined")n[t].write(this);else throw"Unable to write, the array contains unknown elements";}else this.writeInt32(0)}}function ServerSocket(n){this.channel=n;this.endPoint=n.endPoint;this.buffer=new ByteArray([]);this.partialRecord=!1;this.socket=io.connect(this.endPoint);this.socket.serverSocket=this;this.socket.socket.serverSocket=this;this.transport="";this.channel.onConnect=function(n){var t=n;this.socket.socket.on("connect",function(){this.serverSocket.transport=this.socket.transport.name;t()})};this.channel.onDisconnect=function(n){var t=n;this.socket.socket.on("disconnect",function(){t()})};this.send=function(n,t){var r=t==null?0:t.buffer.data.length,i=new PacketWriter;i.writeUInt32(r+4);i.writeKey(n);r>0&&i.buffer.writeBytes(t.buffer.data);this.socket.send(i.buffer.toBase64())};this.socket.on("message",function(n){var e=4,t=new ByteArray([]),i=this.serverSocket,o,l,r,s,h,u,f,c;for(i.partialRecord&&(i.buffer.readBytesTo(t,i.buffer.getSize()),i.partialRecord=!1),t.writeBase64(n);t.position<t.getSize();){if(t.getSize()-t.position<e){i.buffer=new ByteArray([]);t.readBytesTo(i.buffer,t.getSize()-t.position);i.partialRecord=!0;break}if(o=t.readInt(32,!1)+e,t.position-=e,o<=t.getSize()-t.position){for(l=t.readInt(32,!1),r="",s=0;s<4;s++)h=t.readInt(8,!1),u=h.toString(16),u.length==1&&(u="0"+u),r+=u;if(r=r.toUpperCase(),f=new ByteArray([]),t.readBytesTo(f,o-8),f.position=0,i.channel!="undefined"&&i.channel!=null&&i.channel.onReceive!="undefined"&&i.channel.onReceive!=null){c=new PacketReader(f);i.channel.onReceive(r,c)}}else i.buffer=new ByteArray([]),t.readBytesTo(i.buffer,t.getSize()-t.position),i.partialRecord=!0}})}function SupplyCredentialsRequest(){this.credentialsUri;this.credentialsType;this.userName;this.password;this.domain;this.write=function(n){n.writeString(this.credentialsUri);n.writeString(this.credentialsType);n.writeString(this.userName);n.writeString(this.password);n.writeString(this.domain);n.compress()};this.read=function(n){this.credentialsUri=n.readString();this.credentialsType=n.readString();this.userName=n.readString();this.password=n.readString();this.domain=n.readString()}}function RevokeCredentialsRequest(){this.credentialsUri;this.credentialsType;this.write=function(n){n.writeString(this.credentialsUri);n.writeString(this.credentialsType);n.compress()};this.read=function(n){this.credentialsUri=n.readString();this.credentialsType=n.readString()}}function HubSubscribeRequest(){this.hubName;this.subscribeKey;this.write=function(n){n.writeString(this.hubName);n.writeString(this.subscribeKey);n.compress()};this.read=function(n){this.hubName=n.readString();this.subscribeKey=n.readString()}}function HubUnsubscribeRequest(){this.hubName;this.subscribeKey;this.write=function(n){n.writeString(this.hubName);n.writeString(this.subscribeKey);n.compress()};this.read=function(n){this.hubName=n.readString();this.subscribeKey=n.readString()}}function HubPublishRequest(){this.hubName;this.publishKey;this.message;this.write=function(n){n.writeString(this.hubName);n.writeString(this.publishKey);n.writeString(this.message);n.compress()};this.read=function(n){this.hubName=n.readString();this.publishKey=n.readString();this.message=n.readString()}}function PingInform(){this.pong;this.write=function(n){n.writeBoolean(this.pong)};this.read=function(n){this.pong=n.readBoolean()}}function GetServerTimeInform(){this.serverTime;this.write=function(n){n.writeDateTime(this.serverTime)};this.read=function(n){n.decompress();this.serverTime=n.readDateTime()}}function SupplyCredentialsInform(){this.result;this.write=function(n){n.writeBoolean(this.result);n.compress()};this.read=function(n){this.result=n.readBoolean()}}function RevokeCredentialsInform(){this.result;this.write=function(n){n.writeBoolean(this.result);n.compress()};this.read=function(n){this.result=n.readBoolean()}}function HubSubscribeInform(){this.status;this.write=function(n){n.writeInt16(this.status);n.compress()};this.read=function(n){this.status=n.readInt16()}}function HubUnsubscribeInform(){this.status;this.write=function(n){n.writeInt16(this.status);n.compress()};this.read=function(n){this.status=n.readInt16()}}function HubPublishInform(){this.status;this.write=function(n){n.writeInt16(this.status);n.compress()};this.read=function(n){this.status=n.readInt16()}}function HubEventInform(){this.hubName;this.message;this.time;this.write=function(n){n.writeString(this.hubName);n.writeString(this.message);n.writeDateTime(this.time)};this.read=function(n){n.decompress();this.hubName=n.readString();this.message=n.readString();this.time=n.readDateTime()}}function HandshakeRequest(){this.value;this.callback;this.write=function(n){n.writeString(this.value);n.writeInt32(this.callback);n.compress()};this.read=function(n){n.decompress();this.value=n.readString();this.callback=n.readInt32()}}function QueryRequest(){this.session;this.callback;this.target;this.method;this.arguments;this.write=function(n){n.writeString(this.session);n.writeInt32(this.callback);n.writeInt32(this.target);n.writeString(this.method);n.writeArrayOfString(this.arguments);n.compress()};this.read=function(n){n.decompress();this.session=n.readString();this.callback=n.readInt32();this.target=n.readInt32();this.method=n.readString();this.arguments=n.readArrayOfString()}}function NotifyRequest(){this.session;this.type;this.target;this.name;this.value;this.write=function(n){n.writeString(this.session);n.writeByte(this.type);n.writeInt32(this.target);n.writeString(this.name);n.writeString(this.value)};this.read=function(n){n.decompress();this.session=n.readString();this.type=n.readByte();this.target=n.readInt32();this.name=n.readString();this.value=n.readString()}}function HandshakeInform(){this.callback;this.target;this.write=function(n){n.writeInt32(this.callback);n.writeInt32(this.target);n.compress()};this.read=function(n){n.decompress();this.callback=n.readInt32();this.target=n.readInt32()}}function QueryInform(){this.callback;this.result;this.write=function(n){n.writeInt32(this.callback);n.writeString(this.result);n.compress()};this.read=function(n){n.decompress();this.callback=n.readInt32();this.result=n.readString()}}function EventInform(){this.type;this.target;this.name;this.value;this.write=function(n){n.writeByte(this.type);n.writeInt32(this.target);n.writeString(this.name);n.writeString(this.value)};this.read=function(n){n.decompress();this.type=n.readByte();this.target=n.readInt32();this.name=n.readString();this.value=n.readString()}}function OperationReader(){this.read=function(n,t){var i,r,u,f,e,o,s,h,c,l,a;switch(n){case"06C63B75":return i=new HubUnsubscribeInform,i.read(t),i;case"0EE3FF61":return r=new QueryInform,r.read(t),r;case"26792C94":return u=new PingInform,u.read(t),u;case"2DD19B9B":return f=new HubSubscribeInform,f.read(t),f;case"33E7FBD1":return e=new GetServerTimeInform,e.read(t),e;case"3678B12B":return o=new EventInform,o.read(t),o;case"4AC51818":return s=new RevokeCredentialsInform,s.read(t),s;case"645DFF24":return h=new HandshakeInform,h.read(t),h;case"65B2818C":return c=new HubEventInform,c.read(t),c;case"8D98E9FC":return l=new SupplyCredentialsInform,l.read(t),l;case"96B41079":return a=new HubPublishInform,a.read(t),a}return null}}function ServerChannel(n){this.endPoint=n;this.socket=new ServerSocket(this);this.operationReader=new OperationReader;this.connect=function(){this.socket.connect()};this.send=function(n,t){var i=new PacketWriter;t!=null&&i.writePacket(t);this.socket.send(n,i)};this.hubUnsubscribeInform=null;this.queryInform=null;this.pingInform=null;this.hubSubscribeInform=null;this.getServerTimeInform=null;this.eventInform=null;this.revokeCredentialsInform=null;this.handshakeInform=null;this.hubEventInform=null;this.supplyCredentialsInform=null;this.hubPublishInform=null;this.hubUnsubscribe=function(n,t){var i=new HubUnsubscribeRequest;i.hubName=n;i.subscribeKey=t;this._requestedHubUnsubscribeInform++;this.send("06C63B75",i)};this.query=function(n,t,i,r,u){var f=new QueryRequest;f.session=n;f.callback=t;f.target=i;f.method=r;f.arguments=u;this._requestedQueryInform++;this.send("0EE3FF61",f)};this.ping=function(){this._requestedPingInform++;this.send("26792C94",null)};this.hubSubscribe=function(n,t){var i=new HubSubscribeRequest;i.hubName=n;i.subscribeKey=t;this._requestedHubSubscribeInform++;this.send("2DD19B9B",i)};this.getServerTime=function(){this._requestedGetServerTimeInform++;this.send("33E7FBD1",null)};this.revokeCredentials=function(n,t){var i=new RevokeCredentialsRequest;i.credentialsUri=n;i.credentialsType=t;this._requestedRevokeCredentialsInform++;this.send("4AC51818",i)};this.handshake=function(n,t){var i=new HandshakeRequest;i.value=n;i.callback=t;this._requestedHandshakeInform++;this.send("645DFF24",i)};this.supplyCredentials=function(n,t,i,r,u){var f=new SupplyCredentialsRequest;f.credentialsUri=n;f.credentialsType=t;f.userName=i;f.password=r;f.domain=u;this._requestedSupplyCredentialsInform++;this.send("8D98E9FC",f)};this.hubPublish=function(n,t,i){var r=new HubPublishRequest;r.hubName=n;r.publishKey=t;r.message=i;this._requestedHubPublishInform++;this.send("96B41079",r)};this.notify=function(n,t,i,r,u){var f=new NotifyRequest;f.session=n;f.type=t;f.target=i;f.name=r;f.value=u;this.send("F0C4718C",f)};this.dispatchInformOnlyOnRequest=!0;this._requestedHubUnsubscribeInform=0;this._requestedQueryInform=0;this._requestedPingInform=0;this._requestedHubSubscribeInform=0;this._requestedGetServerTimeInform=0;this._requestedRevokeCredentialsInform=0;this._requestedHandshakeInform=0;this._requestedSupplyCredentialsInform=0;this._requestedHubPublishInform=0;this.onReceive=function(n,t){var i=this.operationReader.read(n,t);switch(n){case"06C63B75":(this.dispatchInformOnlyOnRequest&&this._requestedHubUnsubscribeInform>0||!this.dispatchInformOnlyOnRequest)&&(this._requestedHubUnsubscribeInform--,this.hubUnsubscribeInform!=null&&this.hubUnsubscribeInform(i));return;case"0EE3FF61":(this.dispatchInformOnlyOnRequest&&this._requestedQueryInform>0||!this.dispatchInformOnlyOnRequest)&&(this._requestedQueryInform--,this.queryInform!=null&&this.queryInform(i));return;case"26792C94":(this.dispatchInformOnlyOnRequest&&this._requestedPingInform>0||!this.dispatchInformOnlyOnRequest)&&(this._requestedPingInform--,this.pingInform!=null&&this.pingInform(i));return;case"2DD19B9B":(this.dispatchInformOnlyOnRequest&&this._requestedHubSubscribeInform>0||!this.dispatchInformOnlyOnRequest)&&(this._requestedHubSubscribeInform--,this.hubSubscribeInform!=null&&this.hubSubscribeInform(i));return;case"33E7FBD1":(this.dispatchInformOnlyOnRequest&&this._requestedGetServerTimeInform>0||!this.dispatchInformOnlyOnRequest)&&(this._requestedGetServerTimeInform--,this.getServerTimeInform!=null&&this.getServerTimeInform(i));return;case"3678B12B":this.eventInform!=null&&this.eventInform(i);return;case"4AC51818":(this.dispatchInformOnlyOnRequest&&this._requestedRevokeCredentialsInform>0||!this.dispatchInformOnlyOnRequest)&&(this._requestedRevokeCredentialsInform--,this.revokeCredentialsInform!=null&&this.revokeCredentialsInform(i));return;case"645DFF24":(this.dispatchInformOnlyOnRequest&&this._requestedHandshakeInform>0||!this.dispatchInformOnlyOnRequest)&&(this._requestedHandshakeInform--,this.handshakeInform!=null&&this.handshakeInform(i));return;case"65B2818C":this.hubEventInform!=null&&this.hubEventInform(i);return;case"8D98E9FC":(this.dispatchInformOnlyOnRequest&&this._requestedSupplyCredentialsInform>0||!this.dispatchInformOnlyOnRequest)&&(this._requestedSupplyCredentialsInform--,this.supplyCredentialsInform!=null&&this.supplyCredentialsInform(i));return;case"96B41079":(this.dispatchInformOnlyOnRequest&&this._requestedHubPublishInform>0||!this.dispatchInformOnlyOnRequest)&&(this._requestedHubPublishInform--,this.hubPublishInform!=null&&this.hubPublishInform(i));return}}}with({p:ByteArray.prototype}){p.writeFloat=function(t,u,f){for(var bias=Math.pow(2,f-1)-1,minExp=-bias+1,maxExp=bias,minUnnormExp=minExp-u,status=isNaN(n=parseFloat(t))||n==-Infinity||n==+Infinity?n:0,exp=0,len=2*bias+1+u+3,bin=new Array(len),signal=(n=status!==0?0:n)<0,n=Math.abs(n),intPart=Math.floor(n),floatPart=n-intPart,lastBit,rounded,j,result,i=len;i;bin[--i]=0);for(i=bias+2;intPart&&i;bin[--i]=intPart%2,intPart=Math.floor(intPart/2));for(i=bias+1;floatPart>0&&i;(bin[++i]=((floatPart*=2)>=1)-0)&&--floatPart);for(i=-1;++i<len&&!bin[i];);if(bin[(lastBit=u-1+(i=(exp=bias+1-i)>=minExp&&exp<=maxExp?i+1:bias+1-(exp=minExp-1)))+1]){if(!(rounded=bin[lastBit]))for(j=lastBit+2;!rounded&&j<len;rounded=bin[j++]);for(j=lastBit+1;rounded&&--j>=0;(bin[j]=!bin[j]-0)&&(rounded=0));}for(i=i-2<0?-1:i-3;++i<len&&!bin[i];);for((exp=bias+1-i)>=minExp&&exp<=maxExp?++i:exp<minExp&&(exp!=bias+1-len&&exp<minUnnormExp&&this.warn("encodeFloat::float underflow"),i=bias+1-(exp=minExp-1)),(intPart||status!==0)&&(this.warn(intPart?"encodeFloat::float overflow":"encodeFloat::"+status),exp=maxExp+1,i=bias+2,status==-Infinity?signal=1:isNaN(status)&&(bin[i]=1)),n=Math.abs(exp+bias),j=f+1,result="";--j;result=n%2+result,n=n>>=1);for(n=0,j=0,i=(result=(signal?"1":"0")+result+bin.slice(i,i+u).join("")).length,r=[];i;n+=(1<<j)*result.charAt(--i),j==7&&(r[r.length]=String.fromCharCode(n),n=0),j=(j+1)%8);r[r.length]=n?String.fromCharCode(n):"";this.data+=(this.bigEndian?r.reverse():r).join("")};p.writeInt=function(n,t,i){var max=Math.pow(2,t),r=[],maxs=Math.pow(2,t-1);for(i&&(n>=maxs||n<-maxs)&&this.warn("writeInt::overflow")&&(n=0),!i&&(n>=max||n<-(max>>1))&&this.warn("writeUInt::overflow")&&(n=0),n<0&&(n+=max);n;r[r.length]=String.fromCharCode(n%256),n=Math.floor(n/256));for(t=-(-t>>3)-r.length;t--;r[r.length]='\0');this.data+=(this.bigEndian?r.reverse():r).join("")};p.writeByte=function(n){this.writeInt(n,8,!1)};p.writeBytes=function(n){this.data+=n};p.readFloat=function(n,t){var blen=(n+t+1)/8,data=this.data.slice(this.position,this.position+blen);this.position+=blen;var b=((b=new this.Buffer(this.bigEndian,data)).checkBuffer(n+t+1),b),bias=Math.pow(2,t-1)-1,signal=b.readBits(n+t,1),exponent=b.readBits(n,t),significand=0,divisor=2,curByte=b.buffer.length+(-n>>3)-1,byteValue,startBit,mask;do for(byteValue=b.buffer[++curByte],startBit=n%8||8,mask=1<<startBit;mask>>=1;byteValue&mask&&(significand+=1/divisor),divisor*=2);while(n-=startBit);return exponent==(bias<<1)+1?significand?NaN:signal?-Infinity:+Infinity:(1+signal*-2)*(exponent||significand?exponent?Math.pow(2,exponent-bias)*(1+significand):Math.pow(2,-bias+1)*significand:0)};p.readInt=function(n,t){var blen=n/8,data=this.data.slice(this.position,this.position+blen);this.position+=blen;var b=new this.Buffer(this.bigEndian,data),x=b.readBits(0,n),max=Math.pow(2,n);return t&&x>=max/2?x-max:x};p.readByte=function(){return this.readInt(8,!1)};p.readBytes=function(n){var r=this.data.slice(this.position,this.position+n);return this.position+=n,r};p.getAt=function(n){return this.data.charCodeAt(n)&255};p.readBytesTo=function(n,t){n.data+=this.data.slice(this.position,this.position+t);this.position+=t};p.getSize=function(){return this.data.length};p.toBase64=function(){for(var cleanBuffer=[],result="",i=0;i<this.getSize();++i)cleanBuffer.push(this.getAt(i));for(i=0;i<cleanBuffer.length;i++)result+=String.fromCharCode(cleanBuffer[i]);return typeof btoa=="function"?btoa(result):this._btoa(result)};p.writeBase64=function(n){typeof atob=="function"?this.writeBytes(atob(n)):this.writeBytes(this._atob(n))};p._btoa=function(n){for(var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encoded=[],c=0;c<n.length;){var b0=n.charCodeAt(c++),b1=n.charCodeAt(c++),b2=n.charCodeAt(c++),buf=(b0<<16)+((b1||0)<<8)+(b2||0),i0=(buf&16515072)>>18,i1=(buf&258048)>>12,i2=isNaN(b1)?64:(buf&4032)>>6,i3=isNaN(b2)?64:buf&63;encoded[encoded.length]=chars.charAt(i0);encoded[encoded.length]=chars.charAt(i1);encoded[encoded.length]=chars.charAt(i2);encoded[encoded.length]=chars.charAt(i3)}return encoded.join("")};p._atob=function(n){var b64array="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",output="",chr1,chr2,chr3="",enc1,enc2,enc3,enc4="",i=0;n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");do enc1=b64array.indexOf(n.charAt(i++)),enc2=b64array.indexOf(n.charAt(i++)),enc3=b64array.indexOf(n.charAt(i++)),enc4=b64array.indexOf(n.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(enc2&15)<<4|enc3>>2,chr3=(enc3&3)<<6|enc4,output=output+String.fromCharCode(chr1),enc3!=64&&(output=output+String.fromCharCode(chr2)),enc4!=64&&(output=output+String.fromCharCode(chr3)),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="";while(i<n.length);return output};with({p:(p.Buffer=function(n,t){this.bigEndian=n||0;this.buffer=[];this.setBuffer(t)}).prototype})p.readBits=function(n,t){function shl(n,t){for(++t;--t;n=((n%=2147483648)&1073741824)==1073741824?n*2:(n-1073741824)*2+2147483647+1);return n}if(n<0||t<=0)return 0;this.checkBuffer(n+t);for(var offsetLeft,offsetRight=n%8,curByte=this.buffer.length-(n>>3)-1,lastByte=this.buffer.length+(-(n+t)>>3),diff=curByte-lastByte,sum=(this.buffer[curByte]>>offsetRight&(1<<(diff?8-offsetRight:t))-1)+(diff&&(offsetLeft=(n+t)%8)?(this.buffer[lastByte++]&(1<<offsetLeft)-1)<<(diff--<<3)-offsetRight:0);diff;sum+=shl(this.buffer[lastByte++],(diff--<<3)-offsetRight));return sum},p.setBuffer=function(n){if(n){for(var l,i=l=n.length,b=this.buffer=new Array(l);i;b[l-i]=n.charCodeAt(--i));this.bigEndian&&b.reverse()}},p.hasNeededBits=function(n){return this.buffer.length>=-(-n>>3)},p.checkBuffer=function(n){if(!this.hasNeededBits(n))throw new Error("checkBuffer::missing bytes");};p.warn=function(n){if(this.allowExceptions)throw new Error(n);return 1}}
/*! Socket.IO.js build:0.9.11, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */
var io="undefined"==typeof module?{}:module.exports;(function(){if(function(n,t){var i=n;i.version="0.9.11";i.protocol=1;i.transports=[];i.j=[];i.sockets={};i.connect=function(n,r){var u=i.util.parseUri(n),o,f,e;return t&&t.location&&(u.protocol=u.protocol||t.location.protocol.slice(0,-1),u.host=u.host||(t.document?t.document.domain:t.location.hostname),u.port=u.port||t.location.port),o=i.util.uniqueUri(u),e={host:u.host,secure:"https"==u.protocol,port:u.port||("https"==u.protocol?443:80),query:u.query||""},i.util.merge(e,r),(e["force new connection"]||!i.sockets[o])&&(f=new i.Socket(e)),!e["force new connection"]&&f&&(i.sockets[o]=f),f=f||i.sockets[o],f.of(u.path.length>1?u.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(n,t){var i=n.util={},u=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,f=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],r;i.parseUri=function(n){for(var r=u.exec(n||""),i={},t=14;t--;)i[f[t]]=r[t]||"";return i};i.uniqueUri=function(n){var u=n.protocol,i=n.host,r=n.port;return"document"in t?(i=i||document.domain,r=r||(u=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(i=i||"localhost",r||u!="https"||(r=443)),(u||"http")+"://"+i+":"+(r||80)};i.query=function(n,t){var r=i.chunkQuery(n||""),f=[],u;i.merge(r,i.chunkQuery(t||""));for(u in r)r.hasOwnProperty(u)&&f.push(u+"="+r[u]);return f.length?"?"+f.join("&"):""};i.chunkQuery=function(n){for(var r={},u=n.split("&"),i=0,f=u.length,t;i<f;++i)t=u[i].split("="),t[0]&&(r[t[0]]=t[1]);return r};r=!1;i.load=function(n){if("document"in t&&document.readyState==="complete"||r)return n();i.on(t,"load",n,!1)};i.on=function(n,t,i,r){n.attachEvent?n.attachEvent("on"+t,i):n.addEventListener&&n.addEventListener(t,i,r)};i.request=function(n){if(n&&"undefined"!=typeof XDomainRequest&&!i.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!n||i.ua.hasCORS))return new XMLHttpRequest;if(!n)try{return new window[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(t){}return null};"undefined"!=typeof window&&i.load(function(){r=!0});i.defer=function(n){if(!i.ua.webkit||"undefined"!=typeof importScripts)return n();i.load(function(){setTimeout(n,100)})};i.merge=function(n,t,r,u){var e=u||[],o=typeof r=="undefined"?2:r,f;for(f in t)t.hasOwnProperty(f)&&i.indexOf(e,f)<0&&(typeof n[f]=="object"&&o?i.merge(n[f],t[f],o-1,e):(n[f]=t[f],e.push(t[f])));return n};i.mixin=function(n,t){i.merge(n.prototype,t.prototype)};i.inherit=function(n,t){function i(){}i.prototype=t.prototype;n.prototype=new i};i.isArray=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};i.intersect=function(n,t){for(var f=[],o=n.length>t.length?n:t,u=n.length>t.length?t:n,r=0,e=u.length;r<e;r++)~i.indexOf(o,u[r])&&f.push(u[r]);return f};i.indexOf=function(n,t,i){for(var r=n.length,i=i<0?i+r<0?0:i+r:i||0;i<r&&n[i]!==t;i++);return r<=i?-1:i};i.toArray=function(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t]);return i};i.ua={};i.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var n=new XMLHttpRequest}catch(t){return!1}return n.withCredentials!=undefined}();i.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);i.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(n,t){function i(){}n.EventEmitter=i;i.prototype.on=function(n,i){return this.$events||(this.$events={}),this.$events[n]?t.util.isArray(this.$events[n])?this.$events[n].push(i):this.$events[n]=[this.$events[n],i]:this.$events[n]=i,this};i.prototype.addListener=i.prototype.on;i.prototype.once=function(n,t){function i(){r.removeListener(n,i);t.apply(this,arguments)}var r=this;i.listener=t;this.on(n,i);return this};i.prototype.removeListener=function(n,i){var r,f,u,e;if(this.$events&&this.$events[n])if(r=this.$events[n],t.util.isArray(r)){for(f=-1,u=0,e=r.length;u<e;u++)if(r[u]===i||r[u].listener&&r[u].listener===i){f=u;break}if(f<0)return this;r.splice(f,1);r.length||delete this.$events[n]}else(r===i||r.listener&&r.listener===i)&&delete this.$events[n];return this};i.prototype.removeAllListeners=function(n){return n===undefined?(this.$events={},this):(this.$events&&this.$events[n]&&(this.$events[n]=null),this)};i.prototype.listeners=function(n){return this.$events||(this.$events={}),this.$events[n]||(this.$events[n]=[]),t.util.isArray(this.$events[n])||(this.$events[n]=[this.$events[n]]),this.$events[n]};i.prototype.emit=function(n){var i,u,f,r,e;if(!this.$events||(i=this.$events[n],!i))return!1;if(u=Array.prototype.slice.call(arguments,1),"function"==typeof i)i.apply(this,u);else if(t.util.isArray(i))for(f=i.slice(),r=0,e=f.length;r<e;r++)f[r].apply(this,u);else return!1;return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(n,t){"use strict";function u(n){return n<10?"0"+n:n}function l(n){return isFinite(n.valueOf())?n.getUTCFullYear()+"-"+u(n.getUTCMonth()+1)+"-"+u(n.getUTCDate())+"T"+u(n.getUTCHours())+":"+u(n.getUTCMinutes())+":"+u(n.getUTCSeconds())+"Z":null}function c(n){return h.lastIndex=0,h.test(n)?'"'+n.replace(h,function(n){var t=a[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function e(n,t){var o,a,s,v,y=i,h,u=t[n];u instanceof Date&&(u=l(n));typeof r=="function"&&(u=r.call(t,n,u));switch(typeof u){case"string":return c(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(i+=f,h=[],Object.prototype.toString.apply(u)==="[object Array]"){for(v=u.length,o=0;o<v;o+=1)h[o]=e(o,u)||"null";return s=h.length===0?"[]":i?"[\n"+i+h.join(",\n"+i)+"\n"+y+"]":"["+h.join(",")+"]",i=y,s}if(r&&typeof r=="object")for(v=r.length,o=0;o<v;o+=1)typeof r[o]=="string"&&(a=r[o],s=e(a,u),s&&h.push(c(a)+(i?": ":":")+s));else for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(s=e(a,u),s&&h.push(c(a)+(i?": ":":")+s));return s=h.length===0?"{}":i?"{\n"+i+h.join(",\n"+i)+"\n"+y+"}":"{"+h.join(",")+"}",i=y,s}}var o;if(t&&t.parse)return n.JSON={parse:t.parse,stringify:t.stringify};o=n.JSON={};var s=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i,f,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},r;o.stringify=function(n,t,u){var o;if(i="",f="",typeof u=="number")for(o=0;o<u;o+=1)f+=" ";else typeof u=="string"&&(f=u);if(r=t,t&&typeof t!="function"&&(typeof t!="object"||typeof t.length!="number"))throw new Error("JSON.stringify");return e("",{"":n})};o.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),s.lastIndex=0,s.test(n)&&(n=n.replace(s,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");}}("undefined"!=typeof io?io:module.exports,typeof JSON!="undefined"?JSON:undefined),function(n,t){var i=n.parser={},f=i.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],e=i.reasons=["transport not supported","client not handshaken","unauthorized"],o=i.advice=["reconnect"],r=t.JSON,u=t.util.indexOf,s;i.encodePacket=function(n){var l=u(f,n.type),a=n.id||"",v=n.endpoint||"",y=n.ack,t=null,s,i,h,c;switch(n.type){case"error":s=n.reason?u(e,n.reason):"";i=n.advice?u(o,n.advice):"";(s!==""||i!=="")&&(t=s+(i!==""?"+"+i:""));break;case"message":n.data!==""&&(t=n.data);break;case"event":h={name:n.name};n.args&&n.args.length&&(h.args=n.args);t=r.stringify(h);break;case"json":t=r.stringify(n.data);break;case"connect":n.qs&&(t=n.qs);break;case"ack":t=n.ackId+(n.args&&n.args.length?"+"+r.stringify(n.args):"")}return c=[l,a+(y=="data"?"+":""),v],t!==null&&t!==undefined&&c.push(t),c.join(":")};i.encodePayload=function(n){var i="",t,r,u;if(n.length==1)return n[0];for(t=0,r=n.length;t<r;t++)u=n[t],i+="�"+u.length+"�"+n[t];return i};s=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;i.decodePacket=function(n){var t=n.match(s),u;if(!t)return{};var h=t[2]||"",n=t[5]||"",i={type:f[t[1]],endpoint:t[4]||""};h&&(i.id=h,i.ack=t[3]?"data":!0);switch(i.type){case"error":t=n.split("+");i.reason=e[t[0]]||"";i.advice=o[t[1]]||"";break;case"message":i.data=n||"";break;case"event":try{u=r.parse(n);i.name=u.name;i.args=u.args}catch(c){}i.args=i.args||[];break;case"json":try{i.data=r.parse(n)}catch(c){}break;case"connect":i.qs=n||"";break;case"ack":if(t=n.match(/^([0-9]+)(\+)?(.*)/),t&&(i.ackId=t[1],i.args=[],t[3]))try{i.args=t[3]?r.parse(t[3]):[]}catch(c){}}return i};i.decodePayload=function(n){var u,t,r;if(n.charAt(0)=="�"){for(u=[],t=1,r="";t<n.length;t++)n.charAt(t)=="�"?(u.push(i.decodePacket(n.substr(t+1).substr(0,r))),t+=Number(r)+1,r=""):r+=n.charAt(t);return u}return[i.decodePacket(n)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(n,t){function i(n,t){this.socket=n;this.sessid=t}n.Transport=i;t.util.mixin(i,t.EventEmitter);i.prototype.heartbeats=function(){return!0};i.prototype.onData=function(n){var i,r,u;if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),n!==""&&(i=t.parser.decodePayload(n),i&&i.length))for(r=0,u=i.length;r<u;r++)this.onPacket(i[r]);return this};i.prototype.onPacket=function(n){if(this.socket.setHeartbeatTimeout(),n.type=="heartbeat")return this.onHeartbeat();n.type=="connect"&&n.endpoint==""&&this.onConnect();n.type=="error"&&n.advice=="reconnect"&&(this.isOpen=!1);this.socket.onPacket(n);return this};i.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var n=this;this.closeTimeout=setTimeout(function(){n.onDisconnect()},this.socket.closeTimeout)}};i.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this};i.prototype.onConnect=function(){return this.socket.onConnect(),this};i.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)};i.prototype.clearTimeouts=function(){this.clearCloseTimeout();this.reopenTimeout&&clearTimeout(this.reopenTimeout)};i.prototype.packet=function(n){this.send(t.parser.encodePacket(n))};i.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})};i.prototype.onOpen=function(){this.isOpen=!0;this.clearCloseTimeout();this.socket.onOpen()};i.prototype.onClose=function(){var n=this;this.isOpen=!1;this.socket.onClose();this.onDisconnect()};i.prototype.prepareUrl=function(){var n=this.socket.options;return this.scheme()+"://"+n.host+":"+n.port+"/"+n.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid};i.prototype.ready=function(n,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(n,t,i){function r(n){if(this.options={port:80,secure:!1,document:"document"in i?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},t.util.merge(this.options,n),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var r=this;t.util.on(i,"beforeunload",function(){r.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function u(){}n.Socket=r;t.util.mixin(r,t.EventEmitter);r.prototype.of=function(n){return this.namespaces[n]||(this.namespaces[n]=new t.SocketNamespace(this,n),n!==""&&this.namespaces[n].packet({type:"connect"})),this.namespaces[n]};r.prototype.publish=function(){var n,t;this.emit.apply(this,arguments);for(t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(n=this.of(t),n.$emit.apply(n,arguments))};r.prototype.handshake=function(n){function s(t){if(t instanceof Error){r.connecting=!1;r.onError(t.message)}else n.apply(null,t.split(":"))}var r=this,e=this.options,h=["http"+(e.secure?"s":"")+":/",e.host+":"+e.port,e.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/"),o,f,i;this.isXDomain()&&!t.util.ua.hasCORS?(o=document.getElementsByTagName("script")[0],f=document.createElement("script"),f.src=h+"&jsonp="+t.j.length,o.parentNode.insertBefore(f,o),t.j.push(function(n){s(n);f.parentNode.removeChild(f)})):(i=t.util.request(),i.open("GET",h,!0),this.isXDomain()&&(i.withCredentials=!0),i.onreadystatechange=function(){if(i.readyState==4)if(i.onreadystatechange=u,i.status==200)s(i.responseText);else if(i.status==403)r.onError(i.responseText);else r.connecting=!1,r.reconnecting||r.onError(i.responseText)},i.send(null))};r.prototype.getTransport=function(n){for(var u=n||this.transports,i,r=0;i=u[r];r++)if(t.Transport[i]&&t.Transport[i].check(this)&&(!this.isXDomain()||t.Transport[i].xdomainCheck(this)))return new t.Transport[i](this,this.sessionid);return null};r.prototype.connect=function(n){if(this.connecting)return this;var i=this;return i.connecting=!0,this.handshake(function(r,u,f,e){function o(n){if(i.transport&&i.transport.clearTimeouts(),i.transport=i.getTransport(n),!i.transport)return i.publish("connect_failed");i.transport.ready(i,function(){i.connecting=!0;i.publish("connecting",i.transport.name);i.transport.open();i.options["connect timeout"]&&(i.connectTimeoutTimer=setTimeout(function(){if(!i.connected&&(i.connecting=!1,i.options["try multiple transports"])){for(var n=i.transports;n.length>0&&n.splice(0,1)[0]!=i.transport.name;);n.length?o(n):i.publish("connect_failed")}},i.options["connect timeout"]))})}i.sessionid=r;i.closeTimeout=f*1e3;i.heartbeatTimeout=u*1e3;i.transports||(i.transports=i.origTransports=e?t.util.intersect(e.split(","),i.options.transports):i.options.transports);i.setHeartbeatTimeout();o(i.transports);i.once("connect",function(){clearTimeout(i.connectTimeoutTimer);n&&typeof n=="function"&&n()})}),this};r.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var n=this;this.heartbeatTimeoutTimer=setTimeout(function(){n.transport.onClose()},this.heartbeatTimeout)}};r.prototype.packet=function(n){return this.connected&&!this.doBuffer?this.transport.packet(n):this.buffer.push(n),this};r.prototype.setBuffer=function(n){this.doBuffer=n;!n&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())};r.prototype.flushBuffer=function(){this.transport.payload(this.buffer);this.buffer=[]};r.prototype.disconnect=function(){if(this.connected||this.connecting){this.open&&this.of("").packet({type:"disconnect"});this.onDisconnect("booted")}return this};r.prototype.disconnectSync=function(){var n=t.util.request(),i=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";n.open("GET",i,!1);n.send(null);this.onDisconnect("booted")};r.prototype.isXDomain=function(){var n=i.location.port||("https:"==i.location.protocol?443:80);return this.options.host!==i.location.hostname||this.options.port!=n};r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))};r.prototype.onOpen=function(){this.open=!0};r.prototype.onClose=function(){this.open=!1;clearTimeout(this.heartbeatTimeoutTimer)};r.prototype.onPacket=function(n){this.of(n.endpoint).onPacket(n)};r.prototype.onError=function(n){n&&n.advice&&n.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect());this.publish("error",n&&n.reason?n.reason:n)};r.prototype.onDisconnect=function(n){var t=this.connected,i=this.connecting;this.connected=!1;this.connecting=!1;this.open=!1;(t||i)&&(this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",n),"booted"!=n&&this.options.reconnect&&!this.reconnecting&&this.reconnect()))};r.prototype.reconnect=function(){function i(){if(n.connected){for(var i in n.namespaces)n.namespaces.hasOwnProperty(i)&&""!==i&&n.namespaces[i].packet({type:"connect"});n.publish("reconnect",n.transport.name,n.reconnectionAttempts)}clearTimeout(n.reconnectionTimer);n.removeListener("connect_failed",t);n.removeListener("connect",t);n.reconnecting=!1;delete n.reconnectionAttempts;delete n.reconnectionDelay;delete n.reconnectionTimer;delete n.redoTransports;n.options["try multiple transports"]=u}function t(){if(n.reconnecting){if(n.connected)return i();if(n.connecting&&n.reconnecting)return n.reconnectionTimer=setTimeout(t,1e3);if(n.reconnectionAttempts++>=r)if(n.redoTransports)n.publish("reconnect_failed"),i();else{n.on("connect_failed",t);n.options["try multiple transports"]=!0;n.transports=n.origTransports;n.transport=n.getTransport();n.redoTransports=!0;n.connect()}else n.reconnectionDelay<f&&(n.reconnectionDelay*=2),n.connect(),n.publish("reconnecting",n.reconnectionDelay,n.reconnectionAttempts),n.reconnectionTimer=setTimeout(t,n.reconnectionDelay)}}this.reconnecting=!0;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var n=this,r=this.options["max reconnection attempts"],u=this.options["try multiple transports"],f=this.options["reconnection limit"];this.options["try multiple transports"]=!1;this.reconnectionTimer=setTimeout(t,this.reconnectionDelay);this.on("connect",t)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(n,t){function i(n,t){this.socket=n;this.name=t||"";this.flags={};this.json=new r(this,"json");this.ackPackets=0;this.acks={}}function r(n,t){this.namespace=n;this.name=t}n.SocketNamespace=i;t.util.mixin(i,t.EventEmitter);i.prototype.$emit=t.EventEmitter.prototype.emit;i.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};i.prototype.packet=function(n){return n.endpoint=this.name,this.socket.packet(n),this.flags={},this};i.prototype.send=function(n,t){var i={type:this.flags.json?"json":"message",data:n};return"function"==typeof t&&(i.id=++this.ackPackets,i.ack=!0,this.acks[i.id]=t),this.packet(i)};i.prototype.emit=function(n){var t=Array.prototype.slice.call(arguments,1),r=t[t.length-1],i={type:"event",name:n};return"function"==typeof r&&(i.id=++this.ackPackets,i.ack="data",this.acks[i.id]=r,t=t.slice(0,t.length-1)),i.args=t,this.packet(i)};i.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this};i.prototype.onPacket=function(n){function r(){u.packet({type:"ack",args:t.util.toArray(arguments),ackId:n.id})}var u=this,i;switch(n.type){case"connect":this.$emit("connect");break;case"disconnect":if(this.name==="")this.socket.onDisconnect(n.reason||"booted");else this.$emit("disconnect",n.reason);break;case"message":case"json":i=["message",n.data];n.ack=="data"?i.push(r):n.ack&&this.packet({type:"ack",ackId:n.id});this.$emit.apply(this,i);break;case"event":i=[n.name].concat(n.args);n.ack=="data"&&i.push(r);this.$emit.apply(this,i);break;case"ack":this.acks[n.ackId]&&(this.acks[n.ackId].apply(this,n.args),delete this.acks[n.ackId]);break;case"error":if(n.advice)this.socket.onError(n);else n.reason=="unauthorized"?this.$emit("connect_failed",n.reason):this.$emit("error",n.reason)}};r.prototype.send=function(){this.namespace.flags[this.name]=!0;this.namespace.send.apply(this.namespace,arguments)};r.prototype.emit=function(){this.namespace.flags[this.name]=!0;this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(n,t,i){function r(){t.Transport.apply(this,arguments)}n.websocket=r;t.util.inherit(r,t.Transport);r.prototype.name="websocket";r.prototype.open=function(){var u=t.util.query(this.socket.options.query),n=this,r;return r||(r=i.MozWebSocket||i.WebSocket),this.websocket=new r(this.prepareUrl()+u),this.websocket.onopen=function(){n.onOpen();n.socket.setBuffer(!1)},this.websocket.onmessage=function(t){n.onData(t.data)},this.websocket.onclose=function(){n.onClose();n.socket.setBuffer(!0)},this.websocket.onerror=function(t){n.onError(t)},this};r.prototype.send=t.util.ua.iDevice?function(n){var t=this;return setTimeout(function(){t.websocket.send(n)},0),this}:function(n){return this.websocket.send(n),this};r.prototype.payload=function(n){for(var t=0,i=n.length;t<i;t++)this.packet(n[t]);return this};r.prototype.close=function(){return this.websocket.close(),this};r.prototype.onError=function(n){this.socket.onError(n)};r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};r.check=function(){return"WebSocket"in i&&!("__addTask"in WebSocket)||"MozWebSocket"in i};r.xdomainCheck=function(){return!0};t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(t,i){function r(){i.Transport.websocket.apply(this,arguments)}t.flashsocket=r;i.util.inherit(r,i.Transport.websocket);r.prototype.name="flashsocket";r.prototype.open=function(){var n=this,t=arguments;return WebSocket.__addTask(function(){i.Transport.websocket.prototype.open.apply(n,t)}),this};r.prototype.send=function(){var n=this,t=arguments;return WebSocket.__addTask(function(){i.Transport.websocket.prototype.send.apply(n,t)}),this};r.prototype.close=function(){return WebSocket.__tasks.length=0,i.Transport.websocket.prototype.close.call(this),this};r.prototype.ready=function(n,t){function u(){var i=n.options,u=i["flash policy port"],e=["http"+(i.secure?"s":"")+":/",i.host+":"+i.port,i.resource,"static/flashsocket","WebSocketMain"+(n.isXDomain()?"Insecure":"")+".swf"];r.loaded||(typeof WEB_SOCKET_SWF_LOCATION=="undefined"&&(WEB_SOCKET_SWF_LOCATION=e.join("/")),u!==843&&WebSocket.loadFlashPolicyFile("xmlsocket://"+i.host+":"+u),WebSocket.__initialize(),r.loaded=!0);t.call(f)}var f=this;if(document.body)return u();i.util.load(u)};r.check=function(){return typeof WebSocket=="undefined"||!("__initialize"in WebSocket)||!n?!1:n.getFlashPlayerVersion().major>=10};r.xdomainCheck=function(){return!0};typeof window!="undefined"&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0);i.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),"undefined"!=typeof window)var n=function(){function y(){var t,r,n;if(!l){try{t=i.getElementsByTagName("body")[0].appendChild(c("span"));t.parentNode.removeChild(t)}catch(u){return}for(l=!0,r=b.length,n=0;n<r;n++)b[n]()}}function pt(n){l?n():b[b.length]=n}function wt(n){if(typeof u.addEventListener!=r)u.addEventListener("load",n,!1);else if(typeof i.addEventListener!=r)i.addEventListener("load",n,!1);else if(typeof u.attachEvent!=r)fi(u,"onload",n);else if(typeof u.onload=="function"){var t=u.onload;u.onload=function(){t();n()}}else u.onload=n}function ni(){at?ti():rt()}function ti(){var o=i.getElementsByTagName("body")[0],u=c(e),n,f;u.setAttribute("type",w);n=o.appendChild(u);n?(f=0,function(){if(typeof n.GetVariable!=r){var i=n.GetVariable("$version");i&&(i=i.split(" ")[1].split(","),t.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)])}else if(f<10){f++;setTimeout(arguments.callee,10);return}o.removeChild(u);n=null;rt()}()):rt()}function rt(){var y=h.length,i,n,s,c,v;if(y>0)for(i=0;i<y;i++){var u=h[i].id,e=h[i].callbackFn,o={success:!1,id:u};if(t.pv[0]>0){if(n=f(u),n)if(!nt(h[i].swfVersion)||t.wk&&t.wk<312)if(h[i].expressInstall&&ft()){s={};s.data=h[i].expressInstall;s.width=n.getAttribute("width")||"0";s.height=n.getAttribute("height")||"0";n.getAttribute("class")&&(s.styleclass=n.getAttribute("class"));n.getAttribute("align")&&(s.align=n.getAttribute("align"));var p={},l=n.getElementsByTagName("param"),w=l.length;for(c=0;c<w;c++)l[c].getAttribute("name").toLowerCase()!="movie"&&(p[l[c].getAttribute("name")]=l[c].getAttribute("value"));et(s,p,u,e)}else ii(n),e&&e(o);else a(u,!0),e&&(o.success=!0,o.ref=ut(u),e(o))}else a(u,!0),e&&(v=ut(u),v&&typeof v.SetVariable!=r&&(o.success=!0,o.ref=v),e(o))}}function ut(n){var i=null,t=f(n),u;return t&&t.nodeName=="OBJECT"&&(typeof t.SetVariable!=r?i=t:(u=t.getElementsByTagName(e)[0],u&&(i=u))),i}function ft(){return!g&&nt("6.0.65")&&(t.win||t.mac)&&!(t.wk&&t.wk<312)}function et(n,e,o,s){var h,v,l,a;g=!0;tt=s||null;vt={success:!1,id:o};h=f(o);h&&(h.nodeName=="OBJECT"?(p=ot(h),d=null):(p=h,d=o),n.id=ct,(typeof n.width==r||!/%$/.test(n.width)&&parseInt(n.width,10)<310)&&(n.width="310"),(typeof n.height==r||!/%$/.test(n.height)&&parseInt(n.height,10)<137)&&(n.height="137"),i.title=i.title.slice(0,47)+" - Flash Player Installation",v=t.ie&&t.win?["Active"].concat("").join("X"):"PlugIn",l="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+v+"&MMdoctitle="+i.title,typeof e.flashvars!=r?e.flashvars+="&"+l:e.flashvars=l,t.ie&&t.win&&h.readyState!=4&&(a=c("div"),o+="SWFObjectNew",a.setAttribute("id",o),h.parentNode.insertBefore(a,h),h.style.display="none",function(){h.readyState==4?h.parentNode.removeChild(h):setTimeout(arguments.callee,10)}()),st(n,e,o))}function ii(n){if(t.ie&&t.win&&n.readyState!=4){var i=c("div");n.parentNode.insertBefore(i,n);i.parentNode.replaceChild(ot(n),i);n.style.display="none",function(){n.readyState==4?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}()}else n.parentNode.replaceChild(ot(n),n)}function ot(n){var u=c("div"),f,i,o,r;if(t.win&&t.ie)u.innerHTML=n.innerHTML;else if(f=n.getElementsByTagName(e)[0],f&&(i=f.childNodes,i))for(o=i.length,r=0;r<o;r++)i[r].nodeType==1&&i[r].nodeName=="PARAM"||i[r].nodeType==8||u.appendChild(i[r].cloneNode(!0));return u}function st(n,i,u){var v,y=f(u),p,o,b,a,h,s,l;if(t.wk&&t.wk<312)return v;if(y)if(typeof n.id==r&&(n.id=u),t.ie&&t.win){p="";for(o in n)n[o]!=Object.prototype[o]&&(o.toLowerCase()=="data"?i.movie=n[o]:o.toLowerCase()=="styleclass"?p+=' class="'+n[o]+'"':o.toLowerCase()!="classid"&&(p+=" "+o+'="'+n[o]+'"'));b="";for(a in i)i[a]!=Object.prototype[a]&&(b+='<param name="'+a+'" value="'+i[a]+'" />');y.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+p+">"+b+"<\/object>";k[k.length]=n.id;v=f(n.id)}else{h=c(e);h.setAttribute("type",w);for(s in n)n[s]!=Object.prototype[s]&&(s.toLowerCase()=="styleclass"?h.setAttribute("class",n[s]):s.toLowerCase()!="classid"&&h.setAttribute(s,n[s]));for(l in i)i[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"&&ri(h,l,i[l]);y.parentNode.replaceChild(h,y);v=h}return v}function ri(n,t,i){var r=c("param");r.setAttribute("name",t);r.setAttribute("value",i);n.appendChild(r)}function bt(n){var i=f(n);i&&i.nodeName=="OBJECT"&&(t.ie&&t.win?(i.style.display="none",function(){i.readyState==4?ui(n):setTimeout(arguments.callee,10)}()):i.parentNode.removeChild(i))}function ui(n){var t=f(n),i;if(t){for(i in t)typeof t[i]=="function"&&(t[i]=null);t.parentNode.removeChild(t)}}function f(n){var t=null;try{t=i.getElementById(n)}catch(r){}return t}function c(n){return i.createElement(n)}function fi(n,t,i){n.attachEvent(t,i);v[v.length]=[n,t,i]}function nt(n){var r=t.pv,i=n.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,r[0]>i[0]||r[0]==i[0]&&r[1]>i[1]||r[0]==i[0]&&r[1]==i[1]&&r[2]>=i[2]?!0:!1}function kt(n,u,f,s){var a,h,l;t.ie&&t.mac||(a=i.getElementsByTagName("head")[0],a)&&(h=f&&typeof f=="string"?f:"screen",s&&(o=null,it=null),o&&it==h||(l=c("style"),l.setAttribute("type","text/css"),l.setAttribute("media",h),o=a.appendChild(l),t.ie&&t.win&&typeof i.styleSheets!=r&&i.styleSheets.length>0&&(o=i.styleSheets[i.styleSheets.length-1]),it=h),t.ie&&t.win?o&&typeof o.addRule==e&&o.addRule(n,u):o&&typeof i.createTextNode!=r&&o.appendChild(i.createTextNode(n+" {"+u+"}")))}function a(n,t){if(yt){var i=t?"visible":"hidden";l&&f(n)?f(n).style.visibility=i:kt("#"+n,"visibility:"+i)}}function dt(n){var t=/[\\\"<>\.;]/.exec(n)!=null;return t&&typeof encodeURIComponent!=r?encodeURIComponent(n):n}var r="undefined",e="object",ht="Shockwave Flash",gt="ShockwaveFlash.ShockwaveFlash",w="application/x-shockwave-flash",ct="SWFObjectExprInst",lt="onreadystatechange",u=window,i=document,s=navigator,at=!1,b=[ni],h=[],k=[],v=[],p,d,tt,vt,l=!1,g=!1,o,it,yt=!0,t=function(){var l=typeof i.getElementById!=r&&typeof i.getElementsByTagName!=r&&typeof i.createElement!=r,f=s.userAgent.toLowerCase(),o=s.platform.toLowerCase(),a=o?/win/.test(o):/win/.test(f),v=o?/mac/.test(o):/mac/.test(f),y=/webkit/.test(f)?parseFloat(f.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,h=!+"\v1",t=[0,0,0],n=null,c;if(typeof s.plugins!=r&&typeof s.plugins[ht]==e)n=s.plugins[ht].description,!n||typeof s.mimeTypes!=r&&s.mimeTypes[w]&&!s.mimeTypes[w].enabledPlugin||(at=!0,h=!1,n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),t[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),t[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),t[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u[["Active"].concat("Object").join("X")]!=r)try{c=new window[["Active"].concat("Object").join("X")](gt);c&&(n=c.GetVariable("$version"),n&&(h=!0,n=n.split(" ")[1].split(","),t=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]))}catch(p){}return{w3:l,pv:t,wk:y,ie:h,win:a,mac:v}}(),ei=function(){t.w3&&((typeof i.readyState!=r&&i.readyState=="complete"||typeof i.readyState==r&&(i.getElementsByTagName("body")[0]||i.body))&&y(),l||(typeof i.addEventListener!=r&&i.addEventListener("DOMContentLoaded",y,!1),t.ie&&t.win&&(i.attachEvent(lt,function(){i.readyState=="complete"&&(i.detachEvent(lt,arguments.callee),y())}),u==top&&function(){if(!l){try{i.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,0);return}y()}}()),t.wk&&function(){if(!l){if(!/loaded|complete/.test(i.readyState)){setTimeout(arguments.callee,0);return}y()}}(),wt(y)))}(),oi=function(){t.ie&&t.win&&window.attachEvent("onunload",function(){for(var o=v.length,u,r,f,e,i=0;i<o;i++)v[i][0].detachEvent(v[i][1],v[i][2]);for(u=k.length,r=0;r<u;r++)bt(k[r]);for(f in t)t[f]=null;t=null;for(e in n)n[e]=null;n=null})}();return{registerObject:function(n,i,r,u){if(t.w3&&n&&i){var f={};f.id=n;f.swfVersion=i;f.expressInstall=r;f.callbackFn=u;h[h.length]=f;a(n,!1)}else u&&u({success:!1,id:n})},getObjectById:function(n){if(t.w3)return ut(n)},embedSWF:function(n,i,u,f,o,s,h,c,l,v){var y={success:!1,id:i};t.w3&&!(t.wk&&t.wk<312)&&n&&i&&u&&f&&o?(a(i,!1),pt(function(){var t,b,p,k,w,d;if(u+="",f+="",t={},l&&typeof l===e)for(b in l)t[b]=l[b];if(t.data=n,t.width=u,t.height=f,p={},c&&typeof c===e)for(k in c)p[k]=c[k];if(h&&typeof h===e)for(w in h)typeof p.flashvars!=r?p.flashvars+="&"+w+"="+h[w]:p.flashvars=w+"="+h[w];if(nt(o))d=st(t,p,i),t.id==i&&a(i,!0),y.success=!0,y.ref=d;else{if(s&&ft()){t.data=s;et(t,p,i,v);return}a(i,!0)}v&&v(y)})):v&&v(y)},switchOffAutoHideShow:function(){yt=!1},ua:t,getFlashPlayerVersion:function(){return{major:t.pv[0],minor:t.pv[1],release:t.pv[2]}},hasFlashPlayerVersion:nt,createSWF:function(n,i,r){return t.w3?st(n,i,r):undefined},showExpressInstall:function(n,i,r,u){t.w3&&ft()&&et(n,i,r,u)},removeSWF:function(n){t.w3&&bt(n)},createCSS:function(n,i,r,u){t.w3&&kt(n,i,r,u)},addDomLoadEvent:pt,addLoadEvent:wt,getQueryParamValue:function(n){var r=i.location.search||i.location.hash,u,t;if(r){if(/\?/.test(r)&&(r=r.split("?")[1]),n==null)return dt(r);for(u=r.split("&"),t=0;t<u.length;t++)if(u[t].substring(0,u[t].indexOf("="))==n)return dt(u[t].substring(u[t].indexOf("=")+1))}return""},expressInstallCallback:function(){if(g){var n=f(ct);n&&p&&(n.parentNode.replaceChild(p,n),d&&(a(d,!0),t.ie&&t.win&&(p.style.display="block")),tt&&tt(vt));g=!1}}}}();(function(){if("undefined"!=typeof window&&!window.WebSocket){var t=window.console;if(t&&t.log&&t.error||(t={log:function(){},error:function(){}}),!n.hasFlashPlayerVersion("10.0.0")){t.error("Flash Player >= 10.0.0 is required.");return}location.protocol=="file:"&&t.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://...");WebSocket=function(n,t,i,r,u){var f=this;f.__id=WebSocket.__nextId++;WebSocket.__instances[f.__id]=f;f.readyState=WebSocket.CONNECTING;f.bufferedAmount=0;f.__events={};t?typeof t=="string"&&(t=[t]):t=[];setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(f.__id,n,t,i||null,r||0,u||null)})},0)};WebSocket.prototype.send=function(n){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(n));return t<0?!0:(this.bufferedAmount+=t,!1)};WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))};WebSocket.prototype.addEventListener=function(n,t){n in this.__events||(this.__events[n]=[]);this.__events[n].push(t)};WebSocket.prototype.removeEventListener=function(n,t){var r,i;if(n in this.__events)for(r=this.__events[n],i=r.length-1;i>=0;--i)if(r[i]===t){r.splice(i,1);break}};WebSocket.prototype.dispatchEvent=function(n){for(var r=this.__events[n.type]||[],i,t=0;t<r.length;++t)r[t](n);i=this["on"+n.type];i&&i(n)};WebSocket.prototype.__handleEvent=function(n){var t,i;if("readyState"in n&&(this.readyState=n.readyState),"protocol"in n&&(this.protocol=n.protocol),n.type=="open"||n.type=="error")t=this.__createSimpleEvent(n.type);else if(n.type=="close")t=this.__createSimpleEvent("close");else if(n.type=="message")i=decodeURIComponent(n.message),t=this.__createMessageEvent("message",i);else throw"unknown event type: "+n.type;this.dispatchEvent(t)};WebSocket.prototype.__createSimpleEvent=function(n){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(n,!1,!1),t}return{type:n,bubbles:!1,cancelable:!1}};WebSocket.prototype.__createMessageEvent=function(n,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var i=document.createEvent("MessageEvent");return i.initMessageEvent("message",!1,!1,t,null,null,window,null),i}return{type:n,data:t,bubbles:!1,cancelable:!1}};WebSocket.CONNECTING=0;WebSocket.OPEN=1;WebSocket.CLOSING=2;WebSocket.CLOSED=3;WebSocket.__flash=null;WebSocket.__instances={};WebSocket.__tasks=[];WebSocket.__nextId=0;WebSocket.loadFlashPolicyFile=function(n){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(n)})};WebSocket.__initialize=function(){var i,r;if(!WebSocket.__flash){if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION){t.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");return}i=document.createElement("div");i.id="webSocketContainer";i.style.position="absolute";WebSocket.__isFlashLite()?(i.style.left="0px",i.style.top="0px"):(i.style.left="-100px",i.style.top="-100px");r=document.createElement("div");r.id="webSocketFlash";i.appendChild(r);document.body.appendChild(i);n.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(n){n.success||t.error("[WebSocket] swfobject.embedSWF failed")})}};WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var n=0;n<WebSocket.__tasks.length;++n)WebSocket.__tasks[n]();WebSocket.__tasks=[]},0)};WebSocket.__onFlashEvent=function(){return setTimeout(function(){var i,n;try{for(i=WebSocket.__flash.receiveEvents(),n=0;n<i.length;++n)WebSocket.__instances[i[n].webSocketId].__handleEvent(i[n])}catch(r){t.error(r)}},0),!0};WebSocket.__log=function(n){t.log(decodeURIComponent(n))};WebSocket.__error=function(n){t.error(decodeURIComponent(n))};WebSocket.__addTask=function(n){WebSocket.__flash?n():WebSocket.__tasks.push(n)};WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var n=window.navigator.mimeTypes["application/x-shockwave-flash"];return!n||!n.enabledPlugin||!n.enabledPlugin.filename?!1:n.enabledPlugin.filename.match(/flashlite/i)?!0:!1};window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))}})(),function(n,t,i){function r(n){n&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function u(){}n.XHR=r;t.util.inherit(r,t.Transport);r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this};r.prototype.payload=function(n){for(var r=[],i=0,u=n.length;i<u;i++)r.push(t.parser.encodePacket(n[i]));this.send(t.parser.encodePayload(r))};r.prototype.send=function(n){return this.post(n),this};r.prototype.post=function(n){function r(){this.readyState==4&&(this.onreadystatechange=u,t.posting=!1,this.status==200?t.socket.setBuffer(!1):t.onClose())}function f(){this.onload=u;t.socket.setBuffer(!1)}var t=this;this.socket.setBuffer(!0);this.sendXHR=this.request("POST");i.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=f:this.sendXHR.onreadystatechange=r;this.sendXHR.send(n)};r.prototype.close=function(){return this.onClose(),this};r.prototype.request=function(n){var i=t.util.request(this.socket.isXDomain()),r=t.util.query(this.socket.options.query,"t="+ +new Date);if(i.open(n||"GET",this.prepareUrl()+r,!0),n=="POST")try{i.setRequestHeader?i.setRequestHeader("Content-type","text/plain;charset=UTF-8"):i.contentType="text/plain"}catch(u){}return i};r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"};r.check=function(n,r){try{var u=t.util.request(r),f=i.XDomainRequest&&u instanceof XDomainRequest,e=n&&n.options&&n.options.secure?"https:":"http:",o=i.location&&e!=i.location.protocol;if(u&&!(f&&o))return!0}catch(s){}return!1};r.xdomainCheck=function(n){return r.check(n,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(n,t){function i(){t.Transport.XHR.apply(this,arguments)}n.htmlfile=i;t.util.inherit(i,t.Transport.XHR);i.prototype.name="htmlfile";i.prototype.get=function(){var n,i,r;this.doc=new window[["Active"].concat("Object").join("X")]("htmlfile");this.doc.open();this.doc.write("<html><\/html>");this.doc.close();this.doc.parentWindow.s=this;n=this.doc.createElement("div");n.className="socketio";this.doc.body.appendChild(n);this.iframe=this.doc.createElement("iframe");n.appendChild(this.iframe);i=this;r=t.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+r;t.util.on(window,"unload",function(){i.destroy()})};i.prototype._=function(n,t){this.onData(n);try{var i=t.getElementsByTagName("script")[0];i.parentNode.removeChild(i)}catch(r){}};i.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(n){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};i.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)};i.check=function(n){if(typeof window!="undefined"&&["Active"].concat("Object").join("X")in window)try{var i=new window[["Active"].concat("Object").join("X")]("htmlfile");return i&&t.Transport.XHR.check(n)}catch(r){}return!1};i.xdomainCheck=function(){return!1};t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(n,t,i){function r(){t.Transport.XHR.apply(this,arguments)}function u(){}n["xhr-polling"]=r;t.util.inherit(r,t.Transport.XHR);t.util.merge(r,t.Transport.XHR);r.prototype.name="xhr-polling";r.prototype.heartbeats=function(){return!1};r.prototype.open=function(){var n=this;return t.Transport.XHR.prototype.open.call(n),!1};r.prototype.get=function(){function t(){if(this.readyState==4)if(this.onreadystatechange=u,this.status==200){n.onData(this.responseText);n.get()}else n.onClose()}function r(){this.onload=u;this.onerror=u;n.retryCounter=1;n.onData(this.responseText);n.get()}function f(){n.retryCounter++;!n.retryCounter||n.retryCounter>3?n.onClose():n.get()}if(this.isOpen){var n=this;this.xhr=this.request();i.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=r,this.xhr.onerror=f):this.xhr.onreadystatechange=t;this.xhr.send(null)}};r.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=u;try{this.xhr.abort()}catch(n){}this.xhr=null}};r.prototype.ready=function(n,i){var r=this;t.util.defer(function(){i.call(r)})};t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(n,t,i){function r(){t.Transport["xhr-polling"].apply(this,arguments);this.index=t.j.length;var n=this;t.j.push(function(t){n._(t)})}var u=i.document&&"MozAppearance"in i.document.documentElement.style;n["jsonp-polling"]=r;t.util.inherit(r,t.Transport["xhr-polling"]);r.prototype.name="jsonp-polling";r.prototype.post=function(n){function e(){o();r.socket.setBuffer(!1)}function o(){r.iframe&&r.form.removeChild(r.iframe);try{u=document.createElement('<iframe name="'+r.iframeId+'">')}catch(n){u=document.createElement("iframe");u.name=r.iframeId}u.id=r.iframeId;r.form.appendChild(u);r.iframe=u}var r=this,s=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var i=document.createElement("form"),f=document.createElement("textarea"),h=this.iframeId="socketio_iframe_"+this.index,u;i.className="socketio";i.style.position="absolute";i.style.top="0px";i.style.left="0px";i.style.display="none";i.target=h;i.method="POST";i.setAttribute("accept-charset","utf-8");f.name="d";i.appendChild(f);document.body.appendChild(i);this.form=i;this.area=f}this.form.action=this.prepareUrl()+s;o();this.area.value=t.JSON.stringify(n);try{this.form.submit()}catch(c){}this.iframe.attachEvent?u.onreadystatechange=function(){r.iframe.readyState=="complete"&&e()}:this.iframe.onload=e;this.socket.setBuffer(!0)};r.prototype.get=function(){var r=this,n=document.createElement("script"),f=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index),i;this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);n.async=!0;n.src=this.prepareUrl()+f;n.onerror=function(){r.onClose()};i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i);this.script=n;u&&setTimeout(function(){var n=document.createElement("iframe");document.body.appendChild(n);document.body.removeChild(n)},100)};r.prototype._=function(n){this.onData(n);return this.isOpen&&this.get(),this};r.prototype.ready=function(n,i){var r=this;if(!u)return i.call(this);t.util.load(function(){i.call(r)})};r.check=function(){return"document"in i};r.xdomainCheck=function(){return!0};t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);typeof define=="function"&&define.amd&&define([],function(){return io})})()